<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  <!-- 이거 어떻게 등록한걸까? -->

<mapper namespace = "com.bitcamp.op.member.dao.mapper.MemberMapper">
	<select id = "selectByIdPw" 
			resultType = "com.bitcamp.op.member.domain.Member"
			parameterType = "com.bitcamp.op.member.domain.LoginParams">
		select * from member where userid = #{uid} and password = #{pw} 
	</select>
	
	<select id = "selectTotalCount"
			resultType = "int" > <!-- 여기서의 int는 별칭이다. Integer 객체를 가리킨다. Mybatis에 기본 내재되어있는 별칭 원래는 java.lang.Integer -->
		select count(*) from member
	</select>
	
	<select id = "selectList"
			parameterType = "com.bitcamp.op.member.domain.SearchParams" 
			resultType = "com.bitcamp.op.member.domain.Member">
		select * from member order by idx desc limit #{index}, #{count} 
	</select>
	
	<insert id = "insertMember"
			parameterType = "com.bitcamp.op.member.domain.MemberRegRequest" 
			useGeneratedKeys = "true"  
			keyProperty = "idx" > <!-- idx 를 자동증가하는 키값으로 설정한다 -->
		INSERT INTO member (userid, password, username, photo) VALUES (#{userid}, #{pw}, #{username}, #{fileName})
	</insert>
	
	<!-- 파라미터가 하나이고 기본형 또는 문자열일 때는 parameterType 생략한다. -->
	<select id = "selectByIdx"
			resultType = "com.bitcamp.op.member.domain.Member" >
		select * from member where idx = #{idx}
	</select>
</mapper>