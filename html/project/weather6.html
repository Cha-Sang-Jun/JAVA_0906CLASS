<html>
<head>
<title>Weather</title>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-1.7.min.js" ></script>
</head>
<script>

const API_KEY="f25a266c07e9c4b842b6386b1068e10a";

function onGeoOk(position){
    const lat = position.coords.latitude;
    const lon = position.coords.longitude;

    console.log("you live in", lat , lon);
    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}`;
    fetch(url)
        .then(response => response.json())
        .then(data =>{
            const weather = document.querySelector("#weather span:first-child"); 
            const city = document.querySelector("#weather span:last-child");   
            // weather.innerText = data.name;  
            const temp = Math.round(data.main.temp-273.15);
            // city.innerText = `${data.weather[0].main} / ${temp}'C` ;

            console.log(data.name);
            console.log(data.weather[0].main);
    });
}

navigator.geolocation.getCurrentPosition(onGeoOk , () => alert("can't find you"));
</script>

<body>

<h1>Weather API</h1>
<h2> Today Weather Information </h2>
<div class="ctemp">현재 온도: </div>
<div class="clowtemp">최저 온도: </div>
<div class="chightemp">최고 온도: </div>
<div class="cicon">아이콘 : </div>
<!-- HTML -->
</body>
</html>